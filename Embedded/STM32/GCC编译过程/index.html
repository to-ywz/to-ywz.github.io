<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="三千羊毛" href="https://to-ywz.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="三千羊毛" href="https://to-ywz.github.io/atom.xml"><link rel="alternate" type="application/json" title="三千羊毛" href="https://to-ywz.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="ARM"><link rel="canonical" href="https://to-ywz.github.io/Embedded/STM32/GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/"><title>GCC编译过程 - ARM - 嵌入式 | blacksheep = 三千羊毛 = 以己为剑 斩尽诸险</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">GCC编译过程</h1><div class="meta"><span class="item" title="创建时间：2023-07-02 23:33:07"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2023-07-02T23:33:07+08:00">2023-07-02</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>3.1k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>3 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">blacksheep</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/background/81.2t8d6j3wax80.png"></li><li class="item" data-background-image="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/background/88.5ske08bdym40.png"></li><li class="item" data-background-image="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/background/8.1y7aiglwi59c.png"></li><li class="item" data-background-image="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/background/76.2zlospeibnq0.png"></li><li class="item" data-background-image="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/background/19.5qkt08f7sy80.png"></li><li class="item" data-background-image="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/background/59.4q114hwk5q40.png"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Embedded/" itemprop="item" rel="index" title="分类于 嵌入式"><span itemprop="name">嵌入式</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Embedded/ARM/" itemprop="item" rel="index" title="分类于 ARM"><span itemprop="name">ARM</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://to-ywz.github.io/Embedded/STM32/GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.png"><meta itemprop="name" content="黑羊"><meta itemprop="description" content="以己为剑 斩尽诸险, 笔记&分享"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="三千羊毛"></span><div class="body md" itemprop="articleBody"><h1 id="gcc-编译过程"><a class="anchor" href="#gcc-编译过程">#</a> GCC 编译过程</h1><h2 id="编译步骤"><a class="anchor" href="#编译步骤">#</a> 编译步骤</h2><p><img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/2023/001_4_steps.3jiznekrxq2.jpg" alt="001_4_steps"></p><p>一般来说，编译步骤分为</p><ol><li>预处理：将头文件和宏进行替换</li><li>编译：将预编译后的 C 语言文件，编译为汇编文件</li><li>汇编：将汇编文件编译为 n 个二进制文件</li><li>链接：将二进制文件链接为一个</li></ol><h2 id="gcc-的使用方法"><a class="anchor" href="#gcc-的使用方法">#</a> GCC 的使用方法</h2><figure class="highlight makefile"><figcaption data-lang="makefile"></figcaption><table><tr><td data-num="1"></td><td><pre>gcc [option] filename</pre></td></tr></table></figure><h3 id="21-gcc使用示例"><a class="anchor" href="#21-gcc使用示例">#</a> 2.1 gcc 使用示例</h3><p>例如，我们要 编译一个</p><pre><code>gcc main.c                   // 输出一个名为a.out的可执行程序, 然后可以执行./a.out
gcc -o hello main.c          // 输出名为hello的可执行程序, 然后可以执行./hello
gcc -o hello main.c -static  // 静态链接

gcc -c -o hello.o main.c  // 先编译(不链接)
gcc -o hello hello.o       // 再链接
</code></pre><p>静态链接会将涉及到的库 <code>.os</code> 文件都装载到二进制文件中，所以文件会相对的大得多<br><img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/2023/image.47ptc5o31xq0.jpg" alt="image"><br>但是在 windows, 动态编译和静态编译文件大小一致，可能和库文件的构成相关<br><img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/2023/image.28wduvqtc49w.jpg" alt="image"></p><h3 id="gcc-常用选项"><a class="anchor" href="#gcc-常用选项">#</a> gcc 常用选项</h3><table><thead><tr><th style="text-align:center">选项</th><th style="text-align:center">功能</th></tr></thead><tbody><tr><td style="text-align:center">-v</td><td style="text-align:center">查看 gcc 编译器的版本，显示 gcc 执行时的详细过程</td></tr><tr><td style="text-align:center">-o <code>&lt;file&gt;</code></td><td style="text-align:center">指定输出文件名为 file, 这个名称不能跟源文件名同名</td></tr><tr><td style="text-align:center">-E</td><td style="text-align:center">只预处理，不会编译、汇编、链接 t</td></tr><tr><td style="text-align:center">-S</td><td style="text-align:center">只编译，不会汇编、链接</td></tr><tr><td style="text-align:center">-c</td><td style="text-align:center">编译和汇编，不会链接</td></tr></tbody></table><h4 id="手动编译流程"><a class="anchor" href="#手动编译流程">#</a> 手动编译流程</h4><p>如一开始所说的一个 c/c++ 文件要经过 预处理 、 编译 、 汇编 和 链接 才能变成可执行文件</p><h5 id="预处理"><a class="anchor" href="#预处理">#</a> 预处理</h5><p>在 C/C++ 源文件中，以 “#” 开头的语句被称为预处理命令<br>例如，包含命令 “#include”、宏定义命令 “#define”、条件编译命令 “#if”、“#ifdef” 等</p><p>预处理就是将要包含 (include) 的文件插入原文件中、将宏定义展开、根据条件编译命令选择要使用的代码，最后将这些东西输出到一个 “.i” 文件中等待进一步处理<br>在这一步不检测语法错误，在预处理之后文件还是 <code>C</code> 文件</p><p>对应的指令为</p><pre><code>gcc -E -o filename.i filename.c
```makefile

编译前的源文件
```C
#include &lt;stdio.h&gt;

#define MAX_VALUE 10

int main(int argc, char const *argv[])
&#123;
    printf(&quot;%d\r\n&quot;, MAX_VALUE);

    return 0;
&#125;

</code></pre><p>编译后，可以看到 <code>printf</code> 中的 <code>MAX_VALUE</code> 被替换为 10<br>而且代码量明显多了很多东西，这些大部分都是 <code>stdio</code> 内部的文件<br>这也告诉我们，一句输出并没有想象的那么简单，机器背后做了很多的任务<br><img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/2023/image.1o2aauvs9nkw.jpg" alt="image"></p><h5 id="编译"><a class="anchor" href="#编译">#</a> 编译</h5><p>编译是将预处理过的 C/C++ 代码 (例如上述的 “.i” 文件)“翻译” 成汇编代码<br>翻译的代码长短和内存大小，取决于优化等级和编译器的算法<br>在这一步就会进行语法检测，毕竟是一种语言翻译为另一种语言，先得检测词法、语法以及语意，确保原语言没有错误之后才能进行翻译</p><p>对应的指令:</p><figure class="highlight makefile"><figcaption data-lang="makefile"></figcaption><table><tr><td data-num="1"></td><td><pre>gcc -S -o filename.s filename.i</pre></td></tr><tr><td data-num="2"></td><td><pre>// 或</pre></td></tr><tr><td data-num="3"></td><td><pre>gcc -S -o filename.s filename.c</pre></td></tr></table></figure><p>编译后上面的.i 文件变成，将会生成对应的汇编文件<br><img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/2023/image.1215pjqeayjk.jpg" alt="image"></p><p>如果添加 <code>-O1</code> 的优化选项就会出现不一样的代码，效果如下图<br><img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/2023/image.57dvtombnc40.jpg" alt="image"></p><p>按照 gcc 的介绍，越高优先级的代码执行效率越高，占的 RAM 也会减少</p><p>但是，毕竟编译器不是人，它解决问题的思路很有可能是局部最优，全局贪心，这就可能导致一些累加逻辑被优化<br>例如:</p><pre><code class="language-C">void iic_delay(uitn8_t ntime)
&#123;
  while(ntime--)
    ;
&#125;
</code></pre><p>对于上面这种代码 使用 <code>-O3</code> 的优化等级，可能就会被优化<br>不仅如此，越高优先级的优化，在代码调试的时候就会存在越大的困难，因为生成汇编文件已经和原本的 C 语言相差甚远，尽管能正常执行，但一旦出错就很难定位错误</p><h6 id="优化参数表"><a class="anchor" href="#优化参数表">#</a> 优化参数表</h6><table><thead><tr><th>类型</th><th>功能</th><th>说明</th></tr></thead><tbody><tr><td>O0</td><td>不进行优化</td><td>默认不加就是 O0</td></tr><tr><td>O1</td><td>优化等级 1</td><td>\</td></tr><tr><td>O2</td><td>优化等级 2</td><td>\</td></tr><tr><td>O3</td><td>优化等级 3</td><td>\</td></tr><tr><td>Og</td><td>优化等级 1, 并生成调试信息</td><td>在 O1 优化的基础上保留调试信息，当然要配合 <code>-g</code> 一起使用</td></tr><tr><td>Os</td><td>优化等级 2, 去掉反向优化</td><td>不是所有的优化都会减小空间，当出现优化反而变大可以使用 - Os</td></tr><tr><td>Ofast</td><td>优化等级 3, 通过非常规的方式进行优化</td><td>通过打破一些国际标准 (比如一些数学函数的实现标准) 来实现的，一般不推荐</td></tr></tbody></table><h5 id="汇编"><a class="anchor" href="#汇编">#</a> 汇编</h5><p>汇编是将第二步输出的汇编代码翻译成符合一定格式的机器代码.<br>在 Linux 系统上一般表现为 ELF 目标文件 (OBJ 文件).</p><p>最明显的就是使用 keil 时会生成大量的 <code>xx.o</code> 文件，这些都是编译出来</p><p>对应的执行命令如下:</p><figure class="highlight makefile"><figcaption data-lang="makefile"></figcaption><table><tr><td data-num="1"></td><td><pre>gcc -o filename.o filename.s</pre></td></tr></table></figure><p>“反汇编” 是指将机器代码转换为汇编代码，这个功能往往在程序调试中使用<br>反汇编的代码和汇编的代码大概率不相同</p><h5 id="链接"><a class="anchor" href="#链接">#</a> 链接</h5><p>链接就是将上步生成的 OBJ 文件和系统库的 OBJ 文件、库文件链接起来，最终生成了可以在特定平台运行的可执行文件</p><figure class="highlight makefile"><figcaption data-lang="makefile"></figcaption><table><tr><td data-num="1"></td><td><pre>gcc -o filename filename0.o filename1.o filename2.o</pre></td></tr></table></figure><h4 id="更快捷的方法"><a class="anchor" href="#更快捷的方法">#</a> 更快捷的方法</h4><p>一般来说我们不会需要查看 <code>x.i</code> 和 <code>x.s</code> 文件，所以可以跳过这两个步骤，直接生成 `x.o, 然后再进行链接<br>无需每一步指定生成规定的文件类型<br>例如:</p><pre><code class="language-makefilefile">gcc -c -o filename1.o filename1.c
gcc -c -o filename2.o filename2.c
gcc -o filename filename1.o filename2.o
</code></pre><h3 id="指定头文件目录"><a class="anchor" href="#指定头文件目录">#</a> 指定头文件目录</h3><p>在写代码的时候我们，必然会用到库函数，那么这些库函数在哪里呢</p><p>一般来说，编译器会默认使用系统目录，也可以由用户指定<br>系统目录，一般是指，工具链里的某个 include 目录，如何确定呢？</p><p>可以通过下面这条命令，让其在终端中输出</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">'main()&#123;&#125;'</span><span class="token operator">|</span> gcc <span class="token parameter variable">-E</span> <span class="token parameter variable">-v</span> -  // 它会列出头文件目录、库目录<span class="token punctuation">(</span>LIBRARY_PATH<span class="token punctuation">)</span></pre></td></tr></table></figure><p>如果不想用标准库，那么可以使用 <code>-nostdinc</code> 来实现，不使用标准库来编译</p><p>如果要添加自己的头文件库进入编译，可以使用下面这个语句</p><figure class="highlight makefile"><figcaption data-lang="makefile"></figcaption><table><tr><td data-num="1"></td><td><pre>-I &lt;IncDir></pre></td></tr></table></figure><h3 id="指定库文件"><a class="anchor" href="#指定库文件">#</a> 指定库文件</h3><p>同样的库文件，也是我们会用到，一般来说，这些库可能不是开源的 <code>.lib</code> 文件</p><p>与头文件相同，编译器会默认使用系统目录，也可以由用户指定<br>可以通过下面这条语句定位使用的库在哪个文件</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">'main()&#123;&#125;'</span><span class="token operator">|</span> gcc <span class="token parameter variable">-E</span> <span class="token parameter variable">-v</span> -  // 它会列出头文件目录、库目录<span class="token punctuation">(</span>LIBRARY_PATH<span class="token punctuation">)</span></pre></td></tr></table></figure><p>如果不想用标准库，那么可以使用 <code>-nostdlib</code> 来实现终端输出</p><p>如果用户想要添加自己指定库文件目录<br>可以使用下面这条指令来指定自己的库文件所在目录</p><figure class="highlight makefile"><figcaption data-lang="makefile"></figcaption><table><tr><td data-num="1"></td><td><pre>-L &lt;LibDir></pre></td></tr></table></figure><p>与头文件不同，头文件本身只会被预处理到 <code>.c</code> 文件中，用于生成 <code>.i</code> 文件<br>但 <code>.lib</code> 文件不同它可以指定单个文件</p><figure class="highlight makefile"><figcaption data-lang="makefile"></figcaption><table><tr><td data-num="1"></td><td><pre>-l  &lt;abc>   // 链接 libxx.so 或 lib.x</pre></td></tr></table></figure><hr><p>目前对，GCC 的编译过程，了解的只有这些，可能以后会继续添加<br>如果文章中有什么不当或者错误，望大佬们斧正</p><h1 id="参考文献"><a class="anchor" href="#参考文献">#</a> 参考文献</h1><p>[1] <span class="exturl" data-url="aHR0cHM6Ly93d3cuMTAwYXNrLm5ldC9wL3RfcGMvY291cnNlX3BjX2RldGFpbC92aWRlby92XzVmOTI4YjkzZTRiMDI4YmU1OTBiYTQ0MT9wcm9kdWN0X2lkPXBfNWY5MjZhNDllNGIwMGYxMzI4NmEwY2VjJmFtcDtjb250ZW50X2FwcF9pZD0mYW1wO3R5cGU9Ng==">https://www.100ask.net/p/t_pc/course_pc_detail/video/v_5f928b93e4b028be590ba441?product_id=p_5f926a49e4b00f13286a0cec&amp;content_app_id=&amp;type=6</span><br>[2] <code>《嵌入式Linux应用开发完全手册》</code><br>[3] <span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Fpaml0YW8vYXJ0aWNsZS9kZXRhaWxzLzEzMDExMTAwMyM6fjp0ZXh0PTEuJTIwZ2NjJUU0JUI4JUFEJUU2JThDJTg3JUU1JUFFJTlBJUU0JUJDJTk4JUU1JThDJTk2JUU3JUJBJUE3JUU1JTg4JUFCJUU3JTlBJTg0JUU1JThGJTgyJUU2JTk1JUIwJUU2JTlDJTg5JUVGJUJDJTlBLU8wJUUzJTgwJTgxLU8xJUUzJTgwJTgxLU8yJUUzJTgwJTgxLU8zJUUzJTgwJTgxLU9nJUUzJTgwJTgxLU9zJUUzJTgwJTgxLU9mYXN0JUUzJTgwJTgyLDIuJTIwJUU1JTlDJUE4JUU3JUJDJTk2JUU4JUFGJTkxJUU2JTk3JUI2JUVGJUJDJThDJUU1JUE2JTgyJUU2JTlFJTlDJUU2JUIyJUExJUU2JTlDJTg5JUU2JThDJTg3JUU1JUFFJTlBJUU0JUI4JThBJUU5JTlEJUEyJUU3JTlBJTg0JUU0JUJCJUJCJUU0JUJEJTk1JUU0JUJDJTk4JUU1JThDJTk2JUU1JThGJTgyJUU2JTk1JUIwJUVGJUJDJThDJUU1JTg4JTk5JUU5JUJCJTk4JUU4JUFFJUE0JUU0JUI4JUJBJTIwLU8wJUVGJUJDJThDJUU1JThEJUIzJUU2JUIyJUExJUU2JTlDJTg5JUU0JUJDJTk4JUU1JThDJTk2JUUzJTgwJTgy">https://blog.csdn.net/qijitao/article/details/130111003#:~:text=1. gcc 中指定优化级别的参数有：-O0、-O1、-O2、-O3、-Og、-Os、-Ofast。,2. 在编译时，如果没有指定上面的任何优化参数，则默认为 -O0，即没有优化。</span></p><hr><p>大道五十，天衍四十九，人遁其一！</p><div class="tags"><a href="/tags/ARM/" rel="tag"><i class="ic i-tag"></i> ARM</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-07-02 23:34:00" itemprop="dateModified" datetime="2023-07-02T23:34:00+08:00">2023-07-02</time> </span><span id="Embedded/STM32/GCC编译过程/" class="item leancloud_visitors" data-flag-title="GCC编译过程" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/alipay.jpg" alt="黑羊 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>黑羊 <i class="ic i-at"><em>@</em></i>三千羊毛</li><li class="link"><strong>本文链接：</strong> <a href="https://to-ywz.github.io/Embedded/STM32/GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/" title="GCC编译过程">https://to-ywz.github.io/Embedded/STM32/GCC编译过程/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/Embedded/STM32/ARM%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;cdn.staticaly.com&#x2F;gh&#x2F;to-ywz&#x2F;Image-Hosting@master&#x2F;background&#x2F;23.5s5f7lyf7bs0.png" title="ARM汇编基础知识"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> ARM</span><h3>ARM汇编基础知识</h3></a></div><div class="item right"><a href="/Embedded/Linux/Makefile%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;cdn.staticaly.com&#x2F;gh&#x2F;to-ywz&#x2F;Image-Hosting@master&#x2F;background&#x2F;72.77hlb3k8tc40.png" title="Makefile基本使用"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> Makefile</span><h3>Makefile基本使用</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#gcc-%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B"><span class="toc-number">1.</span> <span class="toc-text">GCC 编译过程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E6%AD%A5%E9%AA%A4"><span class="toc-number">1.1.</span> <span class="toc-text">编译步骤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gcc-%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.</span> <span class="toc-text">GCC 的使用方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-gcc%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 gcc 使用示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#gcc-%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9"><span class="toc-number">1.2.2.</span> <span class="toc-text">gcc 常用选项</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">手动编译流程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A2%84%E5%A4%84%E7%90%86"><span class="toc-number">1.2.2.1.1.</span> <span class="toc-text">预处理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%96%E8%AF%91"><span class="toc-number">1.2.2.1.2.</span> <span class="toc-text">编译</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E5%8F%82%E6%95%B0%E8%A1%A8"><span class="toc-number">1.2.2.1.2.1.</span> <span class="toc-text">优化参数表</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B1%87%E7%BC%96"><span class="toc-number">1.2.2.1.3.</span> <span class="toc-text">汇编</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%93%BE%E6%8E%A5"><span class="toc-number">1.2.2.1.4.</span> <span class="toc-text">链接</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E5%BF%AB%E6%8D%B7%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">更快捷的方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E5%A4%B4%E6%96%87%E4%BB%B6%E7%9B%AE%E5%BD%95"><span class="toc-number">1.2.3.</span> <span class="toc-text">指定头文件目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E5%BA%93%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.4.</span> <span class="toc-text">指定库文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="toc-number">2.</span> <span class="toc-text">参考文献</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/Embedded/STM32/ARM%E6%9E%B6%E6%9E%84/" rel="bookmark" title="ARM架构">ARM架构</a></li><li><a href="/Embedded/STM32/ARM%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="bookmark" title="ARM汇编基础知识">ARM汇编基础知识</a></li><li class="active"><a href="/Embedded/STM32/GCC%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B/" rel="bookmark" title="GCC编译过程">GCC编译过程</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="黑羊" data-src="/images/avatar.png"><p class="name" itemprop="name">黑羊</p><div class="description" itemprop="description">笔记&分享</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">69</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">45</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">36</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RvLXl3eg==" title="https:&#x2F;&#x2F;github.com&#x2F;to-ywz"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9ibGFja3NoZWVwXzIwOGg=" title="https:&#x2F;&#x2F;twitter.com&#x2F;blacksheep_208h"><i class="ic i-twitter"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS84MS0yOC05NC0yMw==" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;81-28-94-23"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTM5ODIwNTQyMTQ=" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;3982054214"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20veW91cm5hbWU=" title="https:&#x2F;&#x2F;weibo.com&#x2F;yourname"><i class="ic i-weibo"></i></span> <span class="exturl item about" data-url="aHR0cHM6Ly9hYm91dC5tZS9ibGFja3NoZWVwLjIwOGgvZ2V0c3RhcnRlZA==" title="https:&#x2F;&#x2F;about.me&#x2F;blacksheep.208h&#x2F;getstarted"><i class="ic i-address-card"></i></span> <span class="exturl item email" data-url="bWFpbHRvOmJsYWNrc2hlZXAuMjA4aEBnbWFpbC5jb20=" title="mailto:blacksheep.208h@gmail.com"><i class="ic i-envelope"></i></span> <span class="exturl item facebook" data-url="aHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2xvdmVoeGxseHk=" title="https:&#x2F;&#x2F;www.facebook.com&#x2F;lovehxllxy"><i class="ic i-facebook"></i></span> <span class="exturl item stackoverflow" data-url="aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS91c2Vycy8xNjM2MjAzMi9ibGFja3NoZWVw" title="https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;16362032&#x2F;blacksheep"><i class="ic i-stack-overflow"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/Embedded/STM32/ARM%E6%B1%87%E7%BC%96%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/Embedded/Linux/Makefile%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/%E6%97%A5%E5%B8%B8%E8%B4%B4%E5%A3%AB/" title="分类于 日常贴士">日常贴士</a> <i class="ic i-angle-right"></i> <a href="/categories/%E6%97%A5%E5%B8%B8%E8%B4%B4%E5%A3%AB/prevent-disease/" title="分类于 疾病预防">疾病预防</a></div><span><a href="/life-tips/prevent-disease/%E9%A2%84%E9%98%B2%E7%9A%AE%E8%82%A4%E5%B9%B2%E7%87%A5/" title="预防皮肤干燥">预防皮肤干燥</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Embedded/" title="分类于 嵌入式">嵌入式</a> <i class="ic i-angle-right"></i> <a href="/categories/Embedded/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="分类于 学习笔记">学习笔记</a></div><span><a href="/Embedded/Linux/GDB%E5%AD%A6%E4%B9%A0/" title="GDB学习">GDB学习</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学与技术">计算机科学与技术</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mysql/" title="分类于 mysql">mysql</a></div><span><a href="/computer-science/database/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%94%E7%94%A8-Ubuntu%E4%B8%8BMySQL%E8%A7%86%E5%9B%BE%E5%92%8C%E7%B4%A2%E5%BC%95/" title="数据库应用:Ubuntu下MySQL视图和索引">数据库应用:Ubuntu下MySQL视图和索引</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/win11/" title="分类于 win11">win11</a> <i class="ic i-angle-right"></i> <a href="/categories/win11/Question/" title="分类于 Question">Question</a></div><span><a href="/win11/Question/win11%E5%85%B3%E9%97%AD%E8%87%AA%E5%B8%A6%E7%9A%84%E7%B9%81%E4%BD%93%E5%88%87%E6%8D%A2/" title="win11关闭自带的繁体切换">win11关闭自带的繁体切换</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Algorithm/" title="分类于 Algorithm">Algorithm</a> <i class="ic i-angle-right"></i> <a href="/categories/Algorithm/LeetCode/" title="分类于 LeetCode">LeetCode</a></div><span><a href="/computer-science/algorithm/Leetcode/P7%E6%95%B4%E6%95%B0%E5%8F%8D%E8%BD%AC/P7%E6%95%B4%E6%95%B0%E5%8F%8D%E8%BD%AC/" title="P7整数反转">P7整数反转</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Makefile/" title="分类于 Makefile">Makefile</a></div><span><a href="/Embedded/Linux/Makefile%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" title="Makefile基本使用">Makefile基本使用</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/work/" title="分类于 求职">求职</a> <i class="ic i-angle-right"></i> <a href="/categories/work/%E7%AC%94%E8%AF%95/" title="分类于 笔试">笔试</a></div><span><a href="/work/%E7%AC%94%E8%AF%95%E9%94%A6%E9%9B%86-%E6%99%BA%E8%83%BD%E6%B6%82%E9%B8%A6/" title="笔试锦集(一)——智能涂鸦">笔试锦集(一)——智能涂鸦</a></span></li><li class="item"><div class="breadcrumb"></div><span><a href="/Embedded/STM32/RT-Thread-Nano-%E7%A7%BB%E6%A4%8D/" title="RT-Thread Nano 移植">RT-Thread Nano 移植</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Embedded/" title="分类于 嵌入式">嵌入式</a> <i class="ic i-angle-right"></i> <a href="/categories/Embedded/communication-protocol/" title="分类于 通信协议">通信协议</a></div><span><a href="/Embedded/communication-protocol/IIC/" title="IIC 协议备忘">IIC 协议备忘</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学与技术">计算机科学与技术</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mysql/" title="分类于 mysql">mysql</a></div><span><a href="/computer-science/database/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%94%E7%94%A8-Ubuntu%E4%B8%8BMySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" title="数据库应用:Ubuntu下MySQL数据库和数据表的基本操作">数据库应用:Ubuntu下MySQL数据库和数据表的基本操作</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2019 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-blacksheep"></i> </span><span class="author" itemprop="copyrightHolder">黑羊 @ blacksheep</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"Embedded/STM32/GCC编译过程/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:{placeholder:"1. 提问前请先仔细阅读本文档⚡\n2. 页面显示问题💥, 请提供控制台截图📸或者您的测试网址\n3. 其他任何报错💣, 请提供详细描述和截图📸, 祝食用愉快(๑•̀ㅂ•́)و✧"},fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>