<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="三千羊毛" href="https://to-ywz.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="三千羊毛" href="https://to-ywz.github.io/atom.xml"><link rel="alternate" type="application/json" title="三千羊毛" href="https://to-ywz.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="Linux"><link rel="canonical" href="https://to-ywz.github.io/Embedded/Linux/Linux%E7%BC%96%E8%AF%91Hello-World/"><title>Linux编译Hello World - 学习笔记 - Linux - 嵌入式 | blacksheep = 三千羊毛 = 以己为剑 斩尽诸险</title><meta name="generator" content="Hexo 5.4.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Linux编译Hello World</h1><div class="meta"><span class="item" title="创建时间：2021-10-07 15:47:58"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-10-07T15:47:58+08:00">2021-10-07</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>4.5k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>4 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">blacksheep</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/background/25.2p10yyl1y480.png"></li><li class="item" data-background-image="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/background/109.4vxilh1l2c80.png"></li><li class="item" data-background-image="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/background/49.7kzwlobwt2k0.png"></li><li class="item" data-background-image="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/background/85.4wt0wgqzijs0.png"></li><li class="item" data-background-image="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/background/69.27881bblr0nw.png"></li><li class="item" data-background-image="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/background/92.2y8cwf6coso0.png"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Embedded/" itemprop="item" rel="index" title="分类于 嵌入式"><span itemprop="name">嵌入式</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/Embedded/Linux/" itemprop="item" rel="index" title="分类于 Linux"><span itemprop="name">Linux</span></a><meta itemprop="position" content="2"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="item" rel="index" title="分类于 学习笔记"><span itemprop="name">学习笔记</span></a><meta itemprop="position" content="3"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://to-ywz.github.io/Embedded/Linux/Linux%E7%BC%96%E8%AF%91Hello-World/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.png"><meta itemprop="name" content="黑羊"><meta itemprop="description" content="以己为剑 斩尽诸险, 笔记&分享"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="三千羊毛"></span><div class="body md" itemprop="articleBody"><h1 id="linux-c"><a class="anchor" href="#linux-c">#</a> Linux C</h1><h2 id="gcc-编译链"><a class="anchor" href="#gcc-编译链">#</a> GCC 编译链</h2><p>GCC 编译链 (toolchain) 是以 GCC 为核心的一整套工具，用于把源码转化为可执行应用程序。主要包括以下三部分:</p><ul><li><code>gcc-core</code> : 即 GCC 编译器，用于完成预处理和编译的过程.</li><li><code>Binutils</code> : 除 GCC 编译器外的一些列小工具。包括了 链接器 <code>ld</code> , 汇编器 <code>as</code> , 目标文件格式查看器 <code>readelf</code> 等.</li><li><code>glibc</code> : 包含了主要的 C 语言标准库函数，C 语言中常常使用的打印函数 <code>printf</code> 、 <code>malloc</code> 函数就在 <code>glibc</code> 库中</li></ul><h3 id="gcc编译器"><a class="anchor" href="#gcc编译器">#</a> GCC 编译器</h3><p>GCC (GUN Compiler Collection) 是由 GUN 开发的编程语言编译器. GCC 最初代表 <code>GNU C Compiler</code> , 当时只支持 C 语言。后来逐渐支持 C++, JAVA 等，GCC 就被重定义为 <code>GNU Compiler Collection</code> , 称为史上最优秀的编译器。其比一般编译器编译器平均效率高出 20%~30%.<br>虽然大部分教程都声明 Ubuntu 默认安装好了 GCC, 我实测出来的都是 没有安装 gcc 的，建议先输入以下命令安装 gcc</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">sudo</span> <span class="token function">apt</span> update</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> gcc <span class="token parameter variable">-y</span></pre></td></tr></table></figure><p>安装完毕后，输入 <code>gcc -v</code> 查看版本信息<br><img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/before2022/20211007173355.png" alt="GCC"><br>对于标注进行以下说明</p><ul><li><code>Target:x86_64-linux-gnu</code> 表示该 GCC 的目标平台为 x86_64 架构 (Intel、 AMD 的 CPU), 表示它编译生成的应用程序只适用于 x86 架构，不适用于 ARM 开发板平台.</li><li><code>gcc version 9.3.0</code> 表明该 GCC 的版本为 9.3.0, 部分程序可能会对编译器版本有要求，hello world 程序很简单不需要考虑兼容性。一开始可以不用在乎这个，而编译指定版本的 uboot、 Linux 内核的时候可能会对 GCC 有版本要求</li></ul><h3 id="binutils-工具集"><a class="anchor" href="#binutils-工具集">#</a> Binutils 工具集</h3><p>Binutils（bin utility）, 是 GNU 二进制工具集，通常跟 GCC 编译器一起打包安装到系统，它的官方说明网站地址为:<span class="exturl" data-url="aHR0cHM6Ly93d3cuZ251Lm9yZy9zb2Z0d2FyZS9iaW51dGlscy8=">https://www.gnu.org/software/binutils/</span><br>在进行程序开发的时候通常不会直接调用这些工具，而是在使用 GCC 编译指令的时候由 GCC 编译器间接调用.<br>下面是其中一些常用的工具:</p><ul><li>as: 汇编器，把汇编语言代码转换为机器码（目标文件）</li><li>ld: 链接器，把编译生成的多个目标文件组织成最终的可执行程序文件</li><li>readelf: 可用于查看目标文件或可执行程序文件的信息</li><li>nm: 可用于查看目标文件中出现的符号</li><li>objcopy: 可用于目标文件格式转换，如.bin 转换成.elf 、 .elf 转换成.bin 等</li><li>objdump: 可用于查看目标文件的信息，最主要的作用是反汇编</li><li>size: 可用于查看目标文件不同部分的尺寸和总尺寸，例如代码段大小、数据段大小、使用的静态内存、总大小等</li></ul><p>系统默认的 Binutils 工具集 位于 <code>/usr/bin</code> 目录下。可以使用如下命令查看</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">ls</span> /usr/bin/ <span class="token operator">|</span> <span class="token function">grep</span> linux-gun-</pre></td></tr></table></figure><p><img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/before2022/20211007174648.png" alt="Binutils"></p><h3 id="glibc-库"><a class="anchor" href="#glibc-库">#</a> glibc 库</h3><p><code>glibc</code> 库是 GNU 组织为 GNU 系统以及 Linux 系统编写的 C 语言标准库，因为大部分 C 语言都依赖函数库，该文件甚至会直接影响到系统的正常运行，例如文件操作的 <code>read</code> <code>write</code> <code>open</code> , 标准输出的 <code>printf</code> , 内存管理的 <code>malloc</code> 等</p><p>在 Ubuntu 系统下，libc.so.6 是 glibc 的库文件，可直接执行该库文件查看版本，在主机上执行如下命令:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>/lib/x86_64-linux-gun/libc.so.6</pre></td></tr></table></figure><p><img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/before2022/20211007175752.png" alt="lib"><br>在学习 C 语言的时候很好奇标准库是如何实现的，但是奈何 Window 下的 C 库并不开源.<br>在 Linux 下是开源的，可以直接 glibc 的源代码，甚至可以加入开发社区贡献自己的代码.<br>glibc 的官网地址为： <span class="exturl" data-url="aHR0cHM6Ly93d3cuZ251Lm9yZy9zb2Z0d2FyZS9saWJjLw==">https://www.gnu.org/software/libc/</span> , 可在该网站中下载源代码来学习.</p><h2 id="gcc编译过程"><a class="anchor" href="#gcc编译过程">#</a> GCC 编译过程</h2><h3 id="基本语法"><a class="anchor" href="#基本语法">#</a> 基本语法</h3><p>GCC 基本命令如下:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>gcc <span class="token punctuation">[</span>-option<span class="token punctuation">]</span> fileName</pre></td></tr></table></figure><p>常用 option:</p><ul><li><code>-o</code> : 小写字母 <code>o</code> , 指定生成可执行文件的名字，不指定的化生成的可执行文件名为 <code>a.out</code></li><li><code>-E</code> : 只进行预处理，不进行编译，也不进行汇编。简单来说就是去除头文件，替代宏定义。生成 <code>.i</code> 文件</li><li><code>-S</code> : 只编译，不汇编。生成的是 <code>.s</code> 汇编文件</li><li><code>-c</code> : 编译并进行汇编，不进行连接。生成 <code>.o</code> 文件</li><li><code>-g</code> : 生成可执行文件待调试信息，便于 <code>gdb</code> 调试</li><li><code>-Ox</code> : 大写字母 <code>O</code> 加数字，设置程序优化等级，例如 <code>-O1</code> , <code>-O2</code> , <code>-O3</code> , 数字越大的代码优化等级越高，编译出来的程序一般会越小，但是越小的程序约有可能执行异常. ( <code>i++</code> 优化的你都不认识)</li></ul><h3 id="编译过程"><a class="anchor" href="#编译过程">#</a> 编译过程</h3><p>一般来说我们使用 <code>gcc</code> 编译单个文件基本上像这样 <code>gcc hello.c -o hello</code> , 就可以获得到可执行文件 <code>hello.out</code> , 事实上编译是可以分步的。特别是编译多文件的时候，我们会把文件先编译为 <code>.o</code> 文件用于链接，最后才去生成可执行文件.</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 一般来说:</span></pre></td></tr><tr><td data-num="2"></td><td><pre>gcc hello.c <span class="token parameter variable">-o</span> hello</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 等价于以下步骤</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 预处理</span></pre></td></tr><tr><td data-num="6"></td><td><pre>gcc <span class="token parameter variable">-E</span> hello.c <span class="token parameter variable">-o</span> hello.i</pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment"># 编译</span></pre></td></tr><tr><td data-num="9"></td><td><pre>gcc <span class="token parameter variable">-S</span> hello.i <span class="token parameter variable">-o</span> hello.s</pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment"># 汇编</span></pre></td></tr><tr><td data-num="12"></td><td><pre>gcc <span class="token parameter variable">-c</span> hello.s <span class="token parameter variable">-o</span> hello.o</pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment"># 链接</span></pre></td></tr><tr><td data-num="15"></td><td><pre>gcc hello.o <span class="token parameter variable">-o</span> Hello</pre></td></tr></table></figure><p>GCC 编译工具链在编译一个 C 源文件时需要经过以下 4 步:</p><ol><li>预处理，在预处理过程中，对源代码文件中的文件包含 (include)、预编译语句 (如宏定义 define 等) 进行<br>展开，生成.i 文件。可理解为把头文件的代码、宏之类的内容转换成更纯粹的 C 代码，不过生成的文件<br>以.i 为后缀.</li><li>编译，把预处理后的.i 文件通过编译成为汇编语言，生成.s 文件，即把代码从 C 语言转换成汇编语言，<br>这是 GCC 编译器完成的工作.</li><li>汇编，将汇编语言文件经过汇编，生成目标文件.o 文件，每一个源文件都对应一个目标文件。即把汇编<br>语言的代码转换成机器码，这是 as 汇编器完成的工作.</li><li>链接，最后将每个源文件对应的.o 文件链接起来，就生成一个可执行程序文件，这是链接器 ld 完成的<br>工作</li></ol><h3 id="交叉编译工具链"><a class="anchor" href="#交叉编译工具链">#</a> 交叉编译工具链</h3><p>先来看两个概念:</p><ul><li>本地编译：编译器和目标程序都是相同架构的编译过程</li><li>交叉编译：编译器和目标程程序运行在不同架构下的编译过程</li></ul><p>疑惑吗？交叉编译存在的意义是什么？<br>我们来设想一下，我们在 i.MX6ull 上编译 一个庞大的工程，那么我们就需要一个编译器，还需还对应的工程文件的存储空间，调试空间... 更致命的是，C/C++ 这种项目，随随便便一编译都是好几 s, 这还是在我们性能超强的多核 CPU 上.<br>咱的 ARM 架构的处理器资源和性能都无法和 x86 平台相比。尤其是对于 MCU 连 OS 都不配拥有，和谈编译器。有了交叉编译，我们就可以在 其他平台上使劲霍霍 CPU 了.</p><p>其实 MCU 开发的过程就是交编译，无论是 IAR, CCS 还是 keil 都是在 x86 上开发后下载到板子里然后执行.<br><strong>PS: 能进行架构 &quot;交叉&quot; 编译的编译器被称为交叉编译器 (Corss Compiler)</strong></p><h4 id="编译链安装"><a class="anchor" href="#编译链安装">#</a> 编译链安装</h4><p>Linux 下:</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> gcc-arm-linux-gnueabihf <span class="token parameter variable">-y</span></pre></td></tr></table></figure><p>查看一下版本 和 相关编译链<br><img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/before2022/20211008213347.png" alt="arm"><br><img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/before2022/20211008213509.png" alt="version"></p><p>使用 <code>readelf -a hello</code> 查看 可执行文件信息<br>x86 架构<br><img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/before2022/20211008214155.png" alt="x86_64"><br>ARM 架构<br><img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/before2022/20211008214030.png" alt="ARM"></p><h3 id="编译器选择"><a class="anchor" href="#编译器选择">#</a> 编译器选择</h3><p>除了我们安装的版本之外，编译器还有很多版本。目前来说大部分 ARM 开发者使用的都是由 Linaro 组织提供的交叉编译器，包括前面 APT 安装的 ARM-GCC 工具链也是来源于 Linaero.<br>Linaro 是由 ARM 公司发起，与其他 ARM SOC 公司共同投资的非盈利组织.<br>ARM 交叉编译链可以在这里找到:<span class="exturl" data-url="aHR0cHM6Ly9yZWxlYXNlcy5saW5hcm8ub3JnL2NvbXBvbmVudHMvdG9vbGNoYWluL2JpbmFyaWVzLw=="> 传送门</span><br><img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/before2022/20211009092521.png" alt="version"> <img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/before2022/20211009092751.png" alt="os"><br><img data-src="https://cdn.staticaly.com/gh/to-ywz/Image-Hosting@master/before2022/20211009093104.png" alt="platform"></p><p>虽然编译器的命名没有严格的规则，但他们的名字中一般包含我们最为关心的内容，可以根据名字来选择要使用的编译器:<br><code>arch [-os] [-(gun)eabi(hf)] -gcc</code><br>其中各段文字意义如下表所示.<br>GCC 命名格式:</p><table><thead><tr><th>字段</th><th>含义</th></tr></thead><tbody><tr><td>arch</td><td>目标芯片</td></tr><tr><td>gnu</td><td>C 标准库类型</td></tr><tr><td>eabi</td><td>应用二进制接口</td></tr><tr><td>hf</td><td>浮点模式</td></tr><tr><td>以 <code>arm-linux-gnueabihf-gcc</code> 编译器为例来分析一下.</td><td></td></tr></tbody></table><ul><li>arm: 芯片架构为 ARM</li><li>linux: 目标操作系统为 Linux</li><li>gnu: 使用 GNU 的 C 语言标准库即 glibc</li><li>eabi: 使用嵌入式应用二进制接口 (eabi)</li><li>hf: 编译器浮点模式为硬浮点 hard-float.<br>相对于 <code>arm-linux-gnueabi-gcc</code> 查遍仅仅在于是否使携带 <code>hf</code> , 像 M3 内核的处理器就不能使用 <code>hf</code> , 其本身不带 <code>fpu</code></li></ul><h4 id="相关字段详细说明"><a class="anchor" href="#相关字段详细说明">#</a> 相关字段详细说明</h4><h5 id="目标芯片架构"><a class="anchor" href="#目标芯片架构">#</a> 目标芯片架构</h5><p>目标芯片架构就是指交叉编译生成的程序运行的平台，如 ARM、MIPS, 其中 ARM 交叉编译又分为 ARMv7、ARMv8 以及 aarch64 架构.<br>i.MX6ull 的内核为 Cortex-A7, 使用的是 ARMv7 架构.</p><h5 id="大小端"><a class="anchor" href="#大小端">#</a> 大小端</h5><p>指目标芯片的大小端模式，i.MX6ull 使用的是小端模式，若是大端模式 (big edian), 编译器名字中会带 <code>be</code> 或 <code>eb</code> 字段进行标注</p><h5 id="目标操作系统"><a class="anchor" href="#目标操作系统">#</a> 目标操作系统</h5><p>目标操作系统表示编译后程序运行的系统，主要由 Linux 或 bare-metal (裸机) 两种， <code>arm-linux-guneabigcc</code> 表示它的进程目标运行环境为 linux, 程序可以使用 linux 下的 C 标准库或 Linux 内核提供的 API, 例如 fork 等进程函数。而 <code>arm-eabi-gcc</code> 或 <code>arm-none-eabi-gcc</code> 表示它们的目标程序运行在无操作系统的环境中.<br>严格来说，编译 Linux 应用程序时应该使用带 <code>linux</code> 的编译器，而编译 <code>uboot</code> 、裸机程序时，应该使用 <code>bare-metal</code> 类型的裸机编译器.</p><h5 id="c-标准库"><a class="anchor" href="#c-标准库">#</a> C 标准库</h5><p>C 标准库一般 gnu、uglibc 等，分别表示 GNU 的 glibc 和 uclibc 库. C 库取决于系统，不过二者是相互兼容的，基本不需要特别注意。除了裸机开发之外不带 c 库，其他编译器 c 库都是 glibc 的库.</p><h5 id="应用二进制接口"><a class="anchor" href="#应用二进制接口">#</a> 应用二进制接口</h5><p>应用二进制接口 (Application Binary Interface), 描述了应用程序和操作系统之间或其他应用程序的低级接口.<br>在编译器中主要有 <code>abi</code> 和 <code>eabi</code> 两种类型， <code>abi</code> 通常应用在 x86 架构上，而 <code>eabi</code> 表示 <code>emabi abi</code> , 即嵌入式架构，如 ARM、MIPS 等</p><h5 id="浮点模式"><a class="anchor" href="#浮点模式">#</a> 浮点模式</h5><p>部分 ARM 处理器带浮点运算单元，代码需要进行浮点运算时若交给 <code>fpu</code> 处理，可以加快运算速度。编译器针对浮点运算的不同处理情况提供了以下几种模式:</p><ul><li>hard: 硬件浮点类型 (hard-float), 采用 <code>fpu</code> 参与浮点运算.</li><li>soft: 软浮点类型 (soft-float), 即使有 <code>fpu</code> 运算单元也不使用，使用软件模拟</li><li>softfp: 允许使用浮点指令，但是保持与软浮点 ABI 的兼容性</li></ul><p>PS: ABI 即 <code>application binary interface</code> , 即编译器将 c 代码编译成汇编代码时使用的一种规则</p><h3 id="不同编译器对程序的影响"><a class="anchor" href="#不同编译器对程序的影响">#</a> 不同编译器对程序的影响</h3><p>这里主要测试一下软浮点编译的动态编译和静态编译<br>先来理解一下两个概念：</p><ul><li>静态链接：在编译阶段就会把所有用到的库打包到自己的可执行程序中，其优点是具有较好的兼容性，不依赖外部环境，但是生成的程序比较大.</li><li>动态链接：在应用程序运行时，链接器去加载外部的共享库，并完成共享库和动态编译程序之间的链接。不同的程序可以共用代码库，节省内存空间.</li></ul><hr><p>大道五十，天衍四十九，人遁其一！</p><div class="tags"><a href="/tags/Linux/" rel="tag"><i class="ic i-tag"></i> Linux</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-06-19 06:19:09" itemprop="dateModified" datetime="2023-06-19T06:19:09+08:00">2023-06-19</time> </span><span id="Embedded/Linux/Linux编译Hello-World/" class="item leancloud_visitors" data-flag-title="Linux编译Hello World" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/alipay.jpg" alt="黑羊 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>黑羊 <i class="ic i-at"><em>@</em></i>三千羊毛</li><li class="link"><strong>本文链接：</strong> <a href="https://to-ywz.github.io/Embedded/Linux/Linux%E7%BC%96%E8%AF%91Hello-World/" title="Linux编译Hello World">https://to-ywz.github.io/Embedded/Linux/Linux编译Hello-World/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/Embedded/Linux/Ubuntu20-04%E5%AE%89%E8%A3%85%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;cdn.staticaly.com&#x2F;gh&#x2F;to-ywz&#x2F;Image-Hosting@master&#x2F;background&#x2F;43.6dotr8iuggk0.png" title="Ubuntu20.04安装中文输入法"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 学习笔记</span><h3>Ubuntu20.04安装中文输入法</h3></a></div><div class="item right"><a href="/work/%E9%9D%A2%E8%AF%95%E9%94%A6%E9%9B%86-%E6%B6%82%E9%B8%A6%E9%9D%A2%E8%AF%95/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;cdn.staticaly.com&#x2F;gh&#x2F;to-ywz&#x2F;Image-Hosting@master&#x2F;background&#x2F;49.7kzwlobwt2k0.png" title="面试锦集-涂鸦面试"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 面试</span><h3>面试锦集-涂鸦面试</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#linux-c"><span class="toc-number">1.</span> <span class="toc-text">Linux C</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#gcc-%E7%BC%96%E8%AF%91%E9%93%BE"><span class="toc-number">1.1.</span> <span class="toc-text">GCC 编译链</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#gcc%E7%BC%96%E8%AF%91%E5%99%A8"><span class="toc-number">1.1.1.</span> <span class="toc-text">GCC 编译器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#binutils-%E5%B7%A5%E5%85%B7%E9%9B%86"><span class="toc-number">1.1.2.</span> <span class="toc-text">Binutils 工具集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#glibc-%E5%BA%93"><span class="toc-number">1.1.3.</span> <span class="toc-text">glibc 库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gcc%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B"><span class="toc-number">1.2.</span> <span class="toc-text">GCC 编译过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">1.2.1.</span> <span class="toc-text">基本语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B"><span class="toc-number">1.2.2.</span> <span class="toc-text">编译过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91%E5%B7%A5%E5%85%B7%E9%93%BE"><span class="toc-number">1.2.3.</span> <span class="toc-text">交叉编译工具链</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E9%93%BE%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">编译链安装</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%99%A8%E9%80%89%E6%8B%A9"><span class="toc-number">1.2.4.</span> <span class="toc-text">编译器选择</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E5%AD%97%E6%AE%B5%E8%AF%A6%E7%BB%86%E8%AF%B4%E6%98%8E"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">相关字段详细说明</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87%E8%8A%AF%E7%89%87%E6%9E%B6%E6%9E%84"><span class="toc-number">1.2.4.1.1.</span> <span class="toc-text">目标芯片架构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%A7%E5%B0%8F%E7%AB%AF"><span class="toc-number">1.2.4.1.2.</span> <span class="toc-text">大小端</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%AE%E6%A0%87%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F"><span class="toc-number">1.2.4.1.3.</span> <span class="toc-text">目标操作系统</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#c-%E6%A0%87%E5%87%86%E5%BA%93"><span class="toc-number">1.2.4.1.4.</span> <span class="toc-text">C 标准库</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.2.4.1.5.</span> <span class="toc-text">应用二进制接口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.2.4.1.6.</span> <span class="toc-text">浮点模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E5%90%8C%E7%BC%96%E8%AF%91%E5%99%A8%E5%AF%B9%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%BD%B1%E5%93%8D"><span class="toc-number">1.2.5.</span> <span class="toc-text">不同编译器对程序的影响</span></a></li></ol></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/Embedded/Linux/linux%E5%AD%A6%E4%B9%A0/" rel="bookmark" title="linux学习">linux学习</a></li><li><a href="/Embedded/Linux/Ubuntu20-04%E5%AE%89%E8%A3%85%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95/" rel="bookmark" title="Ubuntu20.04安装中文输入法">Ubuntu20.04安装中文输入法</a></li><li class="active"><a href="/Embedded/Linux/Linux%E7%BC%96%E8%AF%91Hello-World/" rel="bookmark" title="Linux编译Hello World">Linux编译Hello World</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="黑羊" data-src="/images/avatar.png"><p class="name" itemprop="name">黑羊</p><div class="description" itemprop="description">笔记&分享</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">69</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">45</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">36</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RvLXl3eg==" title="https:&#x2F;&#x2F;github.com&#x2F;to-ywz"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9ibGFja3NoZWVwXzIwOGg=" title="https:&#x2F;&#x2F;twitter.com&#x2F;blacksheep_208h"><i class="ic i-twitter"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS84MS0yOC05NC0yMw==" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;81-28-94-23"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTM5ODIwNTQyMTQ=" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;3982054214"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20veW91cm5hbWU=" title="https:&#x2F;&#x2F;weibo.com&#x2F;yourname"><i class="ic i-weibo"></i></span> <span class="exturl item about" data-url="aHR0cHM6Ly9hYm91dC5tZS9ibGFja3NoZWVwLjIwOGgvZ2V0c3RhcnRlZA==" title="https:&#x2F;&#x2F;about.me&#x2F;blacksheep.208h&#x2F;getstarted"><i class="ic i-address-card"></i></span> <span class="exturl item email" data-url="bWFpbHRvOmJsYWNrc2hlZXAuMjA4aEBnbWFpbC5jb20=" title="mailto:blacksheep.208h@gmail.com"><i class="ic i-envelope"></i></span> <span class="exturl item facebook" data-url="aHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2xvdmVoeGxseHk=" title="https:&#x2F;&#x2F;www.facebook.com&#x2F;lovehxllxy"><i class="ic i-facebook"></i></span> <span class="exturl item stackoverflow" data-url="aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS91c2Vycy8xNjM2MjAzMi9ibGFja3NoZWVw" title="https:&#x2F;&#x2F;stackoverflow.com&#x2F;users&#x2F;16362032&#x2F;blacksheep"><i class="ic i-stack-overflow"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/Embedded/Linux/Ubuntu20-04%E5%AE%89%E8%A3%85%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/work/%E9%9D%A2%E8%AF%95%E9%94%A6%E9%9B%86-%E6%B6%82%E9%B8%A6%E9%9D%A2%E8%AF%95/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/Algorithm/" title="分类于 Algorithm">Algorithm</a> <i class="ic i-angle-right"></i> <a href="/categories/Algorithm/LeetCode/" title="分类于 LeetCode">LeetCode</a></div><span><a href="/computer-science/algorithm/Leetcode/P38%E5%A4%96%E8%A7%82%E6%95%B0%E5%88%97/" title="P38外观数列">P38外观数列</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学与技术">计算机科学与技术</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mysql/" title="分类于 mysql">mysql</a></div><span><a href="/computer-science/database/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%94%E7%94%A8-Ubuntu%E4%B8%8BMySQL%E5%A4%9A%E8%A1%A8%E6%93%8D%E4%BD%9C/" title="数据库应用:Ubuntu下MySQL多表操作">数据库应用:Ubuntu下MySQL多表操作</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/" title="分类于 网络协议">网络协议</a> <i class="ic i-angle-right"></i> <a href="/categories/%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE/FTP/" title="分类于 FTP">FTP</a></div><span><a href="/computer-science/computer-network/FTP/" title="FTP 基本知识">FTP 基本知识</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/blog/" title="分类于 blog">blog</a></div><span><a href="/blog/to-Build-shoka/" title="搭建 shoka 主题出现的问题">搭建 shoka 主题出现的问题</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学与技术">计算机科学与技术</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/compilation-principle/" title="分类于 编译原理">编译原理</a></div><span><a href="/computer-science/compilation-principle/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%88%A4%E6%96%AD%E9%A2%98/" title="编译原理判断题">编译原理判断题</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Algorithm/" title="分类于 Algorithm">Algorithm</a> <i class="ic i-angle-right"></i> <a href="/categories/Algorithm/LeetCode/" title="分类于 LeetCode">LeetCode</a></div><span><a href="/computer-science/algorithm/Leetcode/P1%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/P1%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/" title="P1两数之和">P1两数之和</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学与技术">计算机科学与技术</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/mysql/" title="分类于 mysql">mysql</a></div><span><a href="/computer-science/database/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%94%E7%94%A8-Ubuntu%E4%B8%8BMySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%80%E5%8D%95%E6%9F%A5%E8%AF%A2/" title="数据库应用:Ubuntu下MySQL数据库简单查询">数据库应用:Ubuntu下MySQL数据库简单查询</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学与技术">计算机科学与技术</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/" title="分类于 深入理解计算机系统">深入理解计算机系统</a></div><span><a href="/computer-science/book/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F_3/" title="深入理解计算机系统_3">深入理解计算机系统_3</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Embedded/" title="分类于 嵌入式">嵌入式</a> <i class="ic i-angle-right"></i> <a href="/categories/Embedded/Linux/" title="分类于 Linux">Linux</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="分类于 学习笔记">学习笔记</a></div><span><a href="/Embedded/Linux/Ubuntu20-04%E5%AE%89%E8%A3%85%E4%B8%AD%E6%96%87%E8%BE%93%E5%85%A5%E6%B3%95/" title="Ubuntu20.04安装中文输入法">Ubuntu20.04安装中文输入法</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/Embedded/" title="分类于 嵌入式">嵌入式</a> <i class="ic i-angle-right"></i> <a href="/categories/Embedded/Linux/" title="分类于 Linux">Linux</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="分类于 学习笔记">学习笔记</a></div><span><a href="/Embedded/Linux/linux%E5%AD%A6%E4%B9%A0/" title="linux学习">linux学习</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2019 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-blacksheep"></i> </span><span class="author" itemprop="copyrightHolder">黑羊 @ blacksheep</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"Embedded/Linux/Linux编译Hello-World/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:{placeholder:"1. 提问前请先仔细阅读本文档⚡\n2. 页面显示问题💥, 请提供控制台截图📸或者您的测试网址\n3. 其他任何报错💣, 请提供详细描述和截图📸, 祝食用愉快(๑•̀ㅂ•́)و✧"},fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>